# Pr√°ctica Calidad Software - Grupo 7

# Miembros del grupo
| Nombre y apellidos | Email urjc | Nickname GitHub |
|:-----------------|:-----:|-------:|
| **Olga Chubinova Bortsova**    | o.chubinova.2022@alumnos.urjc.es | chubi0l |
| **Elinee Freites**    | en.freites.2022@alumnos.urjc.es | ElineeF |
| **Andrea Garrobo Guzm√°n**    | a.garrobo.2022@alumnos.urjc.es | Garrobo08 |
| **Jordi Guix Betancor**    | j.guix.2023@alumnos.urjc.es | jordigb44 |

# üîó Github Repository URL 
https://github.com/chubi0l/calidad-software-2025-grupo-7

# üîó Azure Production URL
# TODO

## üñ•Ô∏è Screenshots
# TODO

# Practise 1
## Olga Chubinova Bortsova
| Commit | Description |
| :----: | :---------: |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/3e2a27ec50f6b3e2d26b0e7de6682be611e268f3) | Task 1 (Test Unitario) |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/2e0db2f91bc79ae81d9f9a14c2b4bce2573f8f8f) | Task 2 (Test de Integraci√≥n con BBDD) |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/32d73e8df0a5648f16f3258ca3f65c101027aa11) | Task 3 (Test de sistemas web - Selenium) |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/699e5f397d67ed7f3564f4c3cf5c5fa62923b90e) | Task 4 (Test de sistemas Rest) |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/173509a46e60b805e0cac953f8ccfa67cf0f1183) | Artillery Test | 
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/ffc8b3d180b915db0f5df23d8d262ce2e9ab02dd) | Cobertura Jacoco |


## Jordi Guix Betancor
| Commit | Description |
| :----: | :---------: |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/9d0b562343c25d3fc28510d0c53e1421e060d88e) | Task 2 (Test Unitario) |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/c5111c44b52609500c805e5c2011185ba06e72ba) | Task 3 (Test de Integraci√≥n con BBDD) |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/93c66c3c998597beb8c929101113c8a2f38b5c02) | Task 4 (Test de sistemas web - Selenium) |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/8385d76cf56c417ae3491401a8cdda3c9fd5b35d) | Task 1 (Test de sistemas Rest) |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/c56167eafc2af5cb146dc0b7a5ca416099b9d5b2) | Artillery Test |


## Elinee Nathalie freites Mu√±oz
| Commit | Description |
| :----: | :---------: |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/d02c718f579ca7fb7334026434a3a0699ec909d2) | Task 4 Ttest Unitario |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/d02c718f579ca7fb7334026434a3a0699ec909d2) | Task 1 (Test de Integraci√≥n con BBDD) |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/9c167b09bd6799bc8a6116c03d8233fbda1458f2) | Task 2 (Test de sistemas web - Selenium) |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/ed49dc75f653b9581d2e726d446a50de4a569a52) | Task 3 (Test de sistemas Rest) |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/08112a0fe91c256cc689d05092f377fc94ec1254) | Artillery Test |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/ffc8b3d180b915db0f5df23d8d262ce2e9ab02dd) | Cobertura Jacoco |

## Andrea Garrobo Guzm√°n
| Commit | Description |
| :----: | :---------: |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/890668abfe9d13d21e79e9cad564e2a55a721b85) | Task 3 - Test Unit |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/5747d956b66760d1c5b4bb4aa71b5691cf753600) | Task 4 - Test Integration |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/c438b79a41a8b54aa19f814adb34b3e4770983ae) | Task 1 - Selenium Web Test |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/ac2a3b51c9cad6a2cf9206b64af91dd894af59d2) | Task 2 - Test  rest |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/08112a0fe91c256cc689d05092f377fc94ec1254) | Artillery Test |
| [Link](https://github.com/chubi0l/calidad-software-2025-grupo-7/commit/ffc8b3d180b915db0f5df23d8d262ce2e9ab02dd) | Cobertura Jacoco |



# Practise 2
## üë• Task Assignment
The following outlines the contribution of each team member to the project:
- **[Olga Chubinova Bortsova]**
  - Actively contributed to the implementation and configuration of the **four GitHub Actions workflows**:
  - Also implemented the Smoke Test and the Selenium Test for the multibrowser
  - Responsible for **fix-1**, which involved:
    - Fixing the malfunction of the **"Cancel"** button on the "Create New Movie" page (it was not returning to the "All Movies" page).
    - Adding a **regression test using Selenium** to verify that users can successfully navigate back to the list of all movies.
    - Simulating the development and maintenance of the Nitflex application using the **existing CI workflows** and following the **GitHub Flow** development model.
  - Fully organized and wrote the **project readme**.

- **[Jordi Guix Betancor]**
  -
- **[Elinee Nathalie freites Mu√±oz]**
  -
- **[Andrea Garrobo Guzm√°n]**
  -


## üîÑ Steps Followed
The following outlines the steps followed to apply the fix for the Cancel button issue and deploy it using GitHub Flow and CI/CD pipelines.

- **[Olga Chubinova Bortsova]**
### üõ†Ô∏è Fix Implemented
- In the movie creation template (`filForm.html`), the Cancel button originally redirected to a non-functional path:
  ```html
  <button class="ui button" onclick="location.href='/films/{{film.id}}'; return false;">Cancel</button>
  ```
- This was changed to:
  ```html
  <button class="ui button" onclick="location.href='/'; return false;">Cancel</button>
  ```
  This update ensures the Cancel button correctly redirects users back to the **home page**, where the list of films is displayed.

- A **Selenium regression test** was added to an existing test class to verify this behavior:
  ```java
  @Test
  @DisplayName("Cancel button from new film page navigates back to film list")
  void testCancelFromNewFilmForm() {
      driver.get("http://localhost:" + port + "/films/new");

      WebElement cancelButton = wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//button[text()='Cancel']")));
      cancelButton.click();

      wait.until(ExpectedConditions.urlToBe("http://localhost:" + port + "/"));
      WebElement createButton = wait.until(ExpectedConditions.presenceOfElementLocated(By.id("create-film")));

      assertTrue(createButton.isDisplayed(), "Expected to be on the homepage after canceling, but we are not.");
  }
  ```
### üîß Git Commands Used
The following Git commands were used throughout the development and deployment of the fix:
```bash
# Create a new branch (This branch was created in the beggining of the proyect)
git checkout -b fix-1
# Stage and commit the changes
git add .
git commit -m "cancel button in new film form fixed"
# Push the branch to GitHub
git push origin fix-1
```
A pull request was opened on GitHub from `fix-1` to `main`, reviewed, and approved. After approval, the branch was succesfully merged.
```bash
# Switch to the main branch
git checkout main
# Merge the fix branch
git merge fix-1
# Push the updated main branch to GitHub
git push origin main
```
### ‚öôÔ∏è Triggered Workflows
Once merged into `main`, the following workflows were automatically triggered by GitHub Actions:
- ‚úÖ [Workflow 2](https://github.com/chubi0l/calidad-software-2025-grupo-7/actions/runs/15252109117)
- ‚úÖ [Workflow 3](https://github.com/chubi0l/calidad-software-2025-grupo-7/actions/runs/15252259279)
- ‚úÖ [Workflow 4](https://github.com/chubi0l/calidad-software-2025-grupo-7/actions/runs/15252613498)

### üê≥ Docker Image
The Docker image built during this process is published on Docker Hub with the corresponding tag:
- [chubi0l/nitflex:1.0.1](https://hub.docker.com/) TODO

### üåç Staging Deployment
![Cancel Button Working](captures/) TODO
 



# üß™ Workflow 4 - Nightly Testing & Staging Deployment
Este workflow se encarga de ejecutar pruebas exhaustivas, construir y desplegar la aplicaci√≥n **Nitflex** cada noche, y etiquetar la imagen Docker como `nitflex-nightly` y la fecha cuando se despleg√≥ la imagen.
---
## üöÄ ¬øCu√°ndo se ejecuta?
Este workflow se lanza autom√°ticamente en los siguientes casos:
- ‚è∞ **Cada noche a las 2:00 AM UTC** (`cron: '0 2 * * *'`)
- üßë‚Äçüíª **Manual** mediante `workflow_dispatch` (desde GitHub Actions)
- ‚úÖ **Al hacer push en `main`**, excepto si solo cambian:
  - `.github/workflows/**`
  - `README.md`
---

## üîß ¬øQu√© hace este workflow?
### 1. `multibrowser` ‚Äì Prueba E2E en m√∫ltiples navegadores
Ejecuta pruebas con Selenium en los siguientes entornos:

| Sistema Operativo | Navegadores |
|-------------------|-------------|
| Ubuntu            | Chrome, Firefox |
| Windows           | Chrome, Firefox, Edge |
| macOS             | Chrome, Firefox, Safari |
üëâ Ejecuta la clase: `TestSeleniumMultibrowser`
---

### 2. `loadtesting` ‚Äì Test y despliegue en Azure (Staging)
Realiza las siguientes acciones:
- ‚úÖ Ejecuta pruebas:
  - Unitarias: `es.codeurjc.web.nitflex.unit.**.*`
  - Integraci√≥n: `es.codeurjc.web.nitflex.integration.**.*`
  - Sistema (excepto multibrowser): `es.codeurjc.web.nitflex.e2e.**.*`
- üê≥ Construye y sube la imagen Docker etiquetada con el commit SHA (`${{ github.sha }}`)
- ‚òÅÔ∏è Despliega autom√°ticamente en Azure Container Instances (staging)
- üìà Ejecuta pruebas con Artillery:
  - Smoke test: `artillery/smoke-test.yml`
  - Carga: `artillery/load-test.yml`
---

### 3. `tag-nightly` ‚Äì Etiquetado de imagen como nitflex-nightly
Si los jobs anteriores finalizan correctamente:
- üîÑ Hace `pull` de la imagen Docker generada (`${{ github.sha }}`)
- üè∑ La vuelve a etiquetar como: `nitflex:nightly-YYYY-MM-DD`
- üì§ La sube nuevamente a Docker Hub
---

## üîó √öltima ejecuci√≥n del workflow
TODO
---

## üì¶ Artefactos generados
- üîß Imagen Docker: `docker.io/<jordigb44243>/nitflex:nightly-YYYY-MM-DD????????????????` TODO
- ‚òÅÔ∏è Contenedor en Azure: `https://nitflex-staging??????????????????` TODO
- üìÑ No se generan artefactos `.zip` o `.jar`, ya que el resultado es la imagen desplegable.
---
